# ========================================
# MustardTree Partners Blog - Environment Configuration
# ========================================

# ===================
# Authentication Mode
# ===================
# Choose your authentication method:
# - "cloudflare" for Cloudflare Access (recommended for production)
# - "local" for username/password (development only)
AUTH_MODE=cloudflare

# ===============================
# Cloudflare Access Configuration
# ===============================
# Your Cloudflare Access domain (e.g., myapp.myteam.cloudflareaccess.com)
CLOUDFLARE_ACCESS_DOMAIN=your-app.yourteam.cloudflareaccess.com

# Application Audience (AUD) tag from your Cloudflare Access application
CLOUDFLARE_ACCESS_AUD=your-application-aud-tag

# Optional: Custom certificates URL (defaults to standard Cloudflare Access certs endpoint)
# CLOUDFLARE_ACCESS_CERTS_URL=https://your-app.yourteam.cloudflareaccess.com/cdn-cgi/access/certs

# ===================
# Admin Access Control
# ===================
# Comma-separated list of admin email addresses
ADMIN_EMAILS=admin@mustardtreepartners.com,you@yourcompany.com

# Comma-separated list of admin email domains (users from these domains get admin access)
ADMIN_DOMAINS=mustardtreepartners.com

# ===============================
# Legacy Local Auth (Development)
# ===============================
# Only used when AUTH_MODE=local (not recommended for production)
ADMIN_USERNAME=webadmin
ADMIN_EMAIL=admin@mustardtreepartners.com
ADMIN_PASSWORD_HASH=your-bcrypt-hash-here

# ===================
# Application Settings
# ===================
NODE_ENV=production

# ===================
# Development Settings
# ===================
# When NODE_ENV=development, you can use these settings for testing
DEV_MOCK_AUTH=false
DEV_MOCK_USER_EMAIL=dev@mustardtreepartners.com
DEV_MOCK_USER_NAME=Development User

# ===================
# Setup Instructions
# ===================
# 
# For Cloudflare Access Setup:
# 1. Go to Cloudflare Zero Trust Dashboard
# 2. Navigate to Access > Applications
# 3. Create a new application for your blog admin
# 4. Set the domain to your blog URL + /admin/*
# 5. Configure access policies (who can access admin)
# 6. Copy the Application AUD from the application settings
# 7. Set CLOUDFLARE_ACCESS_DOMAIN and CLOUDFLARE_ACCESS_AUD above
# 8. Set ADMIN_EMAILS or ADMIN_DOMAINS for admin access control
#
# Example Cloudflare Access Policy:
# - Path: yourdomain.com/admin/*
# - Action: Allow
# - Rules: Email ends with @yourcompany.com
#
# For Local Development:
# 1. Set AUTH_MODE=local
# 2. Set DEV_MOCK_AUTH=true
# 3. Configure DEV_MOCK_USER_* settings
#
# Production Deployment:
# 1. Set all Cloudflare Access variables
# 2. Set NODE_ENV=production
# 3. Ensure your domain is protected by Cloudflare Access
# 4. Test authentication flow before going live