<!DOCTYPE html>
<html>
<head>
    <title>Cloudflare Access Domain Test</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            max-width: 800px; 
            margin: 50px auto; 
            padding: 20px; 
        }
        .test-result { 
            padding: 10px; 
            margin: 10px 0; 
            border-radius: 5px; 
        }
        .success { background-color: #d4edda; color: #155724; }
        .error { background-color: #f8d7da; color: #721c24; }
        .info { background-color: #d1ecf1; color: #0c5460; }
        button { 
            background: #007bff; 
            color: white; 
            padding: 10px 20px; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
            margin: 5px; 
        }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>
    <h1>üîç Cloudflare Access Domain Test</h1>
    <p>Testing different Cloudflare Access URLs for your domain: <strong>mustardtreegroup.com</strong></p>
    
    <div id="results"></div>
    
    <div class="success">
        <h4>‚úÖ SOLUTION FOUND!</h4>
        <p>Your Cloudflare Access is configured as <strong>SELF-HOSTED</strong> on your main domain:</p>
        <p><strong>Correct URL:</strong> <code>https://mustardtreegroup.com/cdn-cgi/access/login</code></p>
    </div>
    
    <h3>Test the Correct URL:</h3>
    <button onclick="testUrl('https://mustardtreegroup.com/cdn-cgi/access/login')">
        ‚úÖ Test: mustardtreegroup.com/cdn-cgi/access/login
    </button>
    
    <h3>Manual Test:</h3>
    <p><strong>Click this link to test manually:</strong></p>
    <ul>
        <li><a href="https://mustardtreegroup.com/cdn-cgi/access/login" target="_blank" style="font-weight: bold; color: #007bff;">üëâ mustardtreegroup.com/cdn-cgi/access/login</a></li>
    </ul>
    
    <div class="info">
        <h4>What you should see:</h4>
        <ul>
            <li><strong>Working:</strong> Cloudflare Access login page with your identity providers</li>
            <li><strong>Not working:</strong> "Page not found" or "This site can't be reached"</li>
        </ul>
    </div>

    <script>
        function addResult(message, type) {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = `test-result ${type}`;
            div.innerHTML = message;
            results.appendChild(div);
        }

        async function testUrl(url) {
            addResult(`üîÑ Testing: ${url}`, 'info');
            
            try {
                // Test with a simple fetch (will be blocked by CORS but gives us info)
                const response = await fetch(url, { 
                    method: 'HEAD', 
                    mode: 'no-cors',
                    cache: 'no-cache'
                });
                
                addResult(`‚úÖ ${url} - Request sent successfully (CORS blocked response, but server is reachable)`, 'success');
                
            } catch (error) {
                if (error.name === 'TypeError' && error.message.includes('Failed to fetch')) {
                    addResult(`‚ùå ${url} - Server not reachable or DNS resolution failed`, 'error');
                } else {
                    addResult(`‚ö†Ô∏è ${url} - ${error.message}`, 'error');
                }
            }
            
            // Also try to open in a new window for manual inspection
            addResult(`üîó Opening ${url} in new tab for manual inspection...`, 'info');
            window.open(url, '_blank');
        }

        // Auto-test the main URL on load
        window.onload = function() {
            addResult('üöÄ Starting automatic tests...', 'info');
            setTimeout(() => testUrl('https://mustardtreegroup.cloudflareaccess.com/cdn-cgi/access/login'), 1000);
        };
    </script>
</body>
</html>